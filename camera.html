<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Scanner</title>
</head>
<body>
<h1>QR Code Scanner</h1>
<video id="camera" width="300" height="300" style="border: 1px solid black;"></video>
<br>
<button id="startButton">Start Camera</button>
<br>
<label for="result">QR Code Result:</label>
<output id="result"></output>

<script type="module">
    import QrScanner from "https://unpkg.com/qr-scanner/qr-scanner.min.js";

    const video = document.getElementById('camera');
    const startButton = document.getElementById('startButton');
    const resultOutput = document.getElementById('result');

    let qrScanner;

    startButton.addEventListener('click', async () => {
        if (!qrScanner) {
            qrScanner = new QrScanner(video, result => {
                resultOutput.textContent = result;
                qrScanner.stop(); // Stop scanning after one result
            });
        }

        try {
            await qrScanner.start();
        } catch (e) {
            alert("Unable to access the camera: " + e);
        }
    });
</script>
</body>
</html>
